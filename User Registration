@app.route('/register', methods=['POST'])
def register():
    username = request.json.get('username')
    password = request.json.get('password')
    role_name = request.json.get('role')

    # Hash the password (you should use a strong hashing algorithm in production)
    hashed_password = password  # For simplicity, use plain text (not recommended)

    role = Role.query.filter_by(name=role_name).first()
    if not role:
        return jsonify({"msg": "Role not found"}), 400

    new_user = User(username=username, password=hashed_password, role=role)
    db.session.add(new_user)
    db.session.commit()

    return jsonify({"msg": "User registered successfully!"}), 201
